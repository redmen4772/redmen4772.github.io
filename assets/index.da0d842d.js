const ye=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}};ye();function K(){}function ue(e){return e()}function se(){return Object.create(null)}function G(e){e.forEach(ue)}function we(e){return typeof e=="function"}function fe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function be(e){return Object.keys(e).length===0}function g(e,t){e.appendChild(t)}function V(e,t,n){e.insertBefore(t,n||null)}function H(e){e.parentNode.removeChild(e)}function y(e){return document.createElement(e)}function ce(e){return document.createTextNode(e)}function k(){return ce(" ")}function O(e,t,n,u){return e.addEventListener(t,n,u),()=>e.removeEventListener(t,n,u)}function o(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ve(e){return e===""?null:+e}function $e(e){return Array.from(e.childNodes)}function D(e,t){e.value=t==null?"":t}function F(e,t,n,u){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,u?"important":"")}let Y;function W(e){Y=e}function Ce(){if(!Y)throw new Error("Function called outside component initialization");return Y}function ke(e){Ce().$$.on_mount.push(e)}const U=[],q=[],ee=[],ae=[],ze=Promise.resolve();let re=!1;function Ee(){re||(re=!0,ze.then(de))}function le(e){ee.push(e)}const ie=new Set;let x=0;function de(){const e=Y;do{for(;x<U.length;){const t=U[x];x++,W(t),Ie(t.$$)}for(W(null),U.length=0,x=0;q.length;)q.pop()();for(let t=0;t<ee.length;t+=1){const n=ee[t];ie.has(n)||(ie.add(n),n())}ee.length=0}while(U.length);for(;ae.length;)ae.pop()();re=!1,ie.clear(),W(e)}function Ie(e){if(e.fragment!==null){e.update(),G(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(le)}}const te=new Set;let Re;function ge(e,t){e&&e.i&&(te.delete(e),e.i(t))}function Me(e,t,n,u){if(e&&e.o){if(te.has(e))return;te.add(e),Re.c.push(()=>{te.delete(e),u&&(n&&e.d(1),u())}),e.o(t)}else u&&u()}const Oe=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Se(e){e&&e.c()}function pe(e,t,n,u){const{fragment:l,on_mount:a,on_destroy:f,after_update:d}=e.$$;l&&l.m(t,n),u||le(()=>{const r=a.map(ue).filter(we);f?f.push(...r):G(r),e.$$.on_mount=[]}),d.forEach(le)}function he(e,t){const n=e.$$;n.fragment!==null&&(G(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Le(e,t){e.$$.dirty[0]===-1&&(U.push(e),Ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,n,u,l,a,f,d=[-1]){const r=Y;W(e);const c=e.$$={fragment:null,ctx:null,props:a,update:K,not_equal:l,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:se(),dirty:d,skip_bound:!1,root:t.target||r.$$.root};f&&f(c.root);let E=!1;if(c.ctx=n?n(e,t.props||{},(h,I,...C)=>{const S=C.length?C[0]:I;return c.ctx&&l(c.ctx[h],c.ctx[h]=S)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](S),E&&Le(e,h)),I}):[],c.update(),E=!0,G(c.before_update),c.fragment=u?u(c.ctx):!1,t.target){if(t.hydrate){const h=$e(t.target);c.fragment&&c.fragment.l(h),h.forEach(H)}else c.fragment&&c.fragment.c();t.intro&&ge(e.$$.fragment),pe(e,t.target,t.anchor,t.customElement),de()}W(r)}class _e{$destroy(){he(this,1),this.$destroy=K}$on(t,n){const u=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return u.push(n),()=>{const l=u.indexOf(n);l!==-1&&u.splice(l,1)}}$set(t){this.$$set&&!be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const{window:Pe}=Oe;function oe(e){let t,n,u,l;return{c(){t=y("a"),n=ce("Image Download"),o(t,"class","download svelte-z93iu6"),o(t,"download","image.png"),o(t,"href",e[6])},m(a,f){V(a,t,f),g(t,n),u||(l=O(t,"click",e[24]),u=!0)},p(a,f){f[0]&64&&o(t,"href",a[6])},d(a){a&&H(t),u=!1,l()}}}function Ae(e){let t,n,u,l,a,f,d,r,c,E,h,I,C,S,j,J,w,L,R,A,M,P,N,Q,T,X,B,Z,b=e[6]&&oe(e);return{c(){t=y("div"),n=y("canvas"),u=k(),l=y("canvas"),a=k(),f=y("canvas"),d=k(),r=y("div"),c=y("input"),E=k(),h=y("input"),I=k(),C=y("label"),C.textContent="HAIR",S=k(),j=y("br"),J=k(),w=y("input"),L=k(),R=y("div"),A=k(),M=y("label"),M.textContent="EYES",P=k(),N=y("br"),Q=k(),T=y("button"),T.textContent="Image Refresh",X=k(),b&&b.c(),o(n,"width",e[3]),o(n,"height",e[3]),F(n,"margin","5vmin"),o(n,"class","svelte-z93iu6"),o(l,"width","1024"),o(l,"height","1024"),F(l,"display","none"),o(l,"class","svelte-z93iu6"),o(f,"width","1024"),o(f,"height","1024"),F(f,"display","none"),o(f,"class","svelte-z93iu6"),o(c,"class","input1 svelte-z93iu6"),o(c,"id","hair"),o(c,"name","hair"),o(c,"type","color"),o(h,"class","input2 svelte-z93iu6"),o(h,"type","text"),o(C,"for","hair"),o(C,"class","svelte-z93iu6"),o(j,"class","svelte-z93iu6"),o(w,"class","input3 svelte-z93iu6"),o(w,"type","range"),o(w,"id","eyes"),o(w,"name","eyes"),o(w,"min","0"),o(w,"max","1530"),o(R,"class","cView1 svelte-z93iu6"),F(R,"background-color",e[14](e[12](e[5])[0],e[12](e[5])[1],e[12](e[5])[2])),o(M,"for","eyes"),o(M,"class","svelte-z93iu6"),o(N,"class","svelte-z93iu6"),o(T,"class","svelte-z93iu6"),o(r,"class","conturl svelte-z93iu6"),o(t,"class","display svelte-z93iu6")},m(m,z){V(m,t,z),g(t,n),e[15](n),g(t,u),g(t,l),e[16](l),g(t,a),g(t,f),e[17](f),g(t,d),g(t,r),g(r,c),D(c,e[4]),g(r,E),g(r,h),D(h,e[4]),g(r,I),g(r,C),g(r,S),g(r,j),g(r,J),g(r,w),D(w,e[5]),g(r,L),g(r,R),g(r,A),g(r,M),g(r,P),g(r,N),g(r,Q),g(r,T),g(r,X),b&&b.m(r,null),B||(Z=[O(Pe,"resize",e[9]),O(c,"input",e[18]),O(c,"change",e[19]),O(h,"input",e[20]),O(h,"keyup",e[21]),O(w,"change",e[22]),O(w,"input",e[22]),O(w,"change",e[23]),O(T,"click",e[9])],B=!0)},p(m,z){z[0]&8&&o(n,"width",m[3]),z[0]&8&&o(n,"height",m[3]),z[0]&16&&D(c,m[4]),z[0]&16&&h.value!==m[4]&&D(h,m[4]),z[0]&32&&D(w,m[5]),z[0]&32&&F(R,"background-color",m[14](m[12](m[5])[0],m[12](m[5])[1],m[12](m[5])[2])),m[6]?b?b.p(m,z):(b=oe(m),b.c(),b.m(r,null)):b&&(b.d(1),b=null)},i:K,o:K,d(m){m&&H(t),e[15](null),e[16](null),e[17](null),b&&b.d(),B=!1,G(Z)}}}function Te(e,t,n){const u=location.href;let l,a,f,d,r="#FF0000",c=0,E,h,I="";ke(async()=>{await S()});const C=async()=>{n(6,I=""),E=M(c),h=P(r);let s=l.getContext("2d");s.clearRect(0,0,1024,1024),await J(s,1024,"#000000"),await L(s,1024,h),await R(s,1024,E,!0),await A(s,1024,"./base.png"),n(6,I=l.toDataURL("image/png").replace("image/png","application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=image.png"))},S=async()=>{n(6,I=""),E=M(c),h=P(r),j();let s=a.getContext("2d");s.clearRect(0,0,d,d),await A(s,d,"./base.png"),await L(s,d,h),await R(s,d,E,!1),await C()},j=async()=>{n(3,d=window.innerHeight<window.innerWidth?window.innerHeight*.5:window.innerWidth*.9)},J=async(s,p,i)=>new Promise(v=>{s.fillStyle=i,s.fillRect(0,0,p,p),v()}),w=async(s,p,i,v,_)=>{if(v!=8){let $=f.getContext("2d");$.globalCompositeOperation="source-over",$.clearRect(0,0,1024,1024);let ne=new Image;ne.src=p[v].image,ne.onload=async()=>{$.drawImage(ne,0,0,1024,1024),$.globalCompositeOperation="source-in",$.fillStyle=p[v].color,$.fillRect(0,0,1024,1024),await A(s,i,f.toDataURL("image/png")),w(s,p,i,v+1,_)}}else _()},L=(s,p,i)=>new Promise(v=>{let _=f.getContext("2d");_.clearRect(0,0,1024,1024),_.globalCompositeOperation="source-over";let $=new Image;$.src="./hair.png",$.onload=async()=>{_.drawImage($,0,0,1024,1024),_.globalCompositeOperation="source-in",_.fillStyle=N(i[0],i[1],i[2]),_.fillRect(0,0,1024,1024),await A(s,p,f.toDataURL("image/png")),v()}}),R=async(s,p,i,v)=>new Promise(async _=>{let $=[{image:"./base.png",color:"rgba(0,0,0,0)"},{image:"./eye_t.png",color:`rgba(${i[0]!=0?.35294117647058826*i[0]:0},${i[1]!=0?.35294117647058826*i[1]:0},${i[2]!=0?.35294117647058826*i[2]:0})`},{image:"./eye_b.png",color:`rgba(${i[0]!=0?i[0]-40:0},${i[1]!=0?i[1]-40:0},${i[2]!=0?i[2]-40:0})`},{image:"./eye_vd.png",color:`rgba(${i[0]!=0?.35294117647058826*i[0]:0},${i[1]!=0?.35294117647058826*i[1]:0},${i[2]!=0?.35294117647058826*i[2]:0})`},{image:"./eye_d.png",color:`rgba(${i[0]!=0?i[0]-40:0},${i[1]!=0?i[1]-40:0},${i[2]!=0?i[2]-40:0})`},{image:"./eye_l.png",color:`rgba(${i[0]!=255?Math.floor(.4785714285714286*i[0]+130):255},${i[1]!=255?Math.floor(.4785714285714286*i[1]+130):255},${i[2]!=255?Math.floor(.4785714285714286*i[2]+130):255})`},{image:"./eye_h.png",color:`rgba(${i[0]!=255?Math.floor(.15*i[0]+219):255},${i[1]!=255?Math.floor(.15*i[1]+219):255},${i[2]!=255?Math.floor(.15*i[2]+219):255})`},{image:"./eye_lh.png",color:`rgba(${i[0]!=255?Math.floor(.25*i[0]+196):255},${i[1]!=255?Math.floor(.25*i[1]+196):255},${i[2]!=255?Math.floor(.25*i[2]+196):255})`}];await w(s,$,p,v?0:3,_)}),A=(s,p,i)=>new Promise(v=>{s.globalCompositeOperation="source-over";let _=new Image;_.src=i,_.onload=()=>{s.drawImage(_,0,0,p,p),v()}}),M=s=>{let p=[[255,0,0,2],[255,0,255,0],[0,0,255,1],[0,255,255,2],[0,255,0,0],[255,255,0,1],[255,0,0,2]][Math.floor(s/255)];return p[p[3]]+=p[p[3]]?-(s%255):s%255,p.slice(0,3)},P=s=>{let p=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s);return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]},N=(s,p,i)=>{const v=_=>{let $=_.toString(16);return $.length==1?"0"+$:$};return"#"+v(s)+v(p)+v(i)};function Q(s){q[s?"unshift":"push"](()=>{a=s,n(1,a)})}function T(s){q[s?"unshift":"push"](()=>{l=s,n(0,l)})}function X(s){q[s?"unshift":"push"](()=>{f=s,n(2,f)})}function B(){r=this.value,n(4,r)}const Z=()=>{L(a.getContext("2d"),d,P(r)),C()};function b(){r=this.value,n(4,r)}const m=()=>{L(a.getContext("2d"),d,P(r)),C()};function z(){c=ve(this.value),n(5,c)}return[l,a,f,d,r,c,I,u,C,S,L,R,M,P,N,Q,T,X,B,Z,b,m,z,()=>{R(a.getContext("2d"),d,M(c),!1),C()},()=>setTimeout(()=>location.href=u,1)]}class He extends _e{constructor(t){super(),me(this,t,Te,Ae,fe,{},null,[-1,-1])}}function Ne(e){let t,n,u,l,a,f;return t=new He({}),{c(){Se(t.$$.fragment),n=k(),u=y("div"),l=k(),a=y("style"),a.textContent=`*{
        margin: 0;
        padding: 0;
    }`},m(d,r){pe(t,d,r),V(d,n,r),V(d,u,r),V(d,l,r),g(document.head,a),f=!0},p:K,i(d){f||(ge(t.$$.fragment,d),f=!0)},o(d){Me(t.$$.fragment,d),f=!1},d(d){he(t,d),d&&H(n),d&&H(u),d&&H(l),H(a)}}}class De extends _e{constructor(t){super(),me(this,t,null,Ne,fe,{})}}new De({target:document.getElementById("app")});
