const _e=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}};_e();function F(){}function ue(e){return e()}function se(){return Object.create(null)}function q(e){e.forEach(ue)}function ye(e){return typeof e=="function"}function fe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function we(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function I(e){e.parentNode.removeChild(e)}function _(e){return document.createElement(e)}function ce(e){return document.createTextNode(e)}function $(){return ce(" ")}function E(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function o(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function le(e){return e===""?null:+e}function ve(e){return Array.from(e.childNodes)}function J(e,t){e.value=t==null?"":t}function Q(e,t,n,s){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}let X;function $e(){if(X===void 0){X=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{X=!0}}return X}function Ce(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const s=_("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const r=$e();let l;return r?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=E(window,"message",c=>{c.source===s.contentWindow&&t()})):(s.src="about:blank",s.onload=()=>{l=E(s.contentWindow,"resize",t)}),p(e,s),()=>{(r||l&&s.contentWindow)&&l(),I(s)}}let V;function B(e){V=e}function Ee(){if(!V)throw new Error("Function called outside component initialization");return V}function ke(e){Ee().$$.on_mount.push(e)}const j=[],U=[],x=[],ae=[],Me=Promise.resolve();let re=!1;function Ie(){re||(re=!0,Me.then(de))}function te(e){x.push(e)}const ie=new Set;let Z=0;function de(){const e=V;do{for(;Z<j.length;){const t=j[Z];Z++,B(t),Oe(t.$$)}for(B(null),j.length=0,Z=0;U.length;)U.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];ie.has(n)||(ie.add(n),n())}x.length=0}while(j.length);for(;ae.length;)ae.pop()();re=!1,ie.clear(),B(e)}function Oe(e){if(e.fragment!==null){e.update(),q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}const ee=new Set;let Re;function pe(e,t){e&&e.i&&(ee.delete(e),e.i(t))}function Se(e,t,n,s){if(e&&e.o){if(ee.has(e))return;ee.add(e),Re.c.push(()=>{ee.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}const Ae=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Le(e){e&&e.c()}function ge(e,t,n,s){const{fragment:r,on_mount:l,on_destroy:c,after_update:u}=e.$$;r&&r.m(t,n),s||te(()=>{const m=l.map(ue).filter(ye);c?c.push(...m):q(m),e.$$.on_mount=[]}),u.forEach(te)}function me(e,t){const n=e.$$;n.fragment!==null&&(q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(e,t){e.$$.dirty[0]===-1&&(j.push(e),Ie(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function he(e,t,n,s,r,l,c,u=[-1]){const m=V;B(e);const d=e.$$={fragment:null,ctx:null,props:l,update:F,not_equal:r,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:se(),dirty:u,skip_bound:!1,root:t.target||m.$$.root};c&&c(d.root);let O=!1;if(d.ctx=n?n(e,t.props||{},(f,h,...R)=>{const C=R.length?R[0]:h;return d.ctx&&r(d.ctx[f],d.ctx[f]=C)&&(!d.skip_bound&&d.bound[f]&&d.bound[f](C),O&&Te(e,f)),h}):[],d.update(),O=!0,q(d.before_update),d.fragment=s?s(d.ctx):!1,t.target){if(t.hydrate){const f=ve(t.target);d.fragment&&d.fragment.l(f),f.forEach(I)}else d.fragment&&d.fragment.c();t.intro&&pe(e.$$.fragment),ge(e,t.target,t.anchor,t.customElement),de()}B(m)}class be{$destroy(){me(this,1),this.$destroy=F}$on(t,n){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!we(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const{window:We}=Ae;function oe(e){let t,n,s,r;return{c(){t=_("a"),n=ce("Image Download"),o(t,"download","image.png"),o(t,"href",e[6]),o(t,"class","svelte-1br85ro")},m(l,c){T(l,t,c),p(t,n),s||(r=E(t,"click",e[17]),s=!0)},p(l,c){c&64&&o(t,"href",l[6])},d(l){l&&I(t),s=!1,r()}}}function Ne(e){let t,n,s,r,l,c,u,m,d,O,f,h,R,C,W,N,K,w,z,S,D,A,H,L,Y,P,G,y=e[7]&&oe(e);return{c(){t=_("div"),s=$(),r=_("div"),l=_("canvas"),c=$(),u=_("canvas"),m=$(),d=_("canvas"),O=$(),f=_("div"),h=_("input"),R=$(),C=_("label"),C.textContent="HAIR",W=$(),N=_("br"),K=$(),w=_("input"),z=$(),S=_("label"),S.textContent="EYES",D=$(),A=_("br"),H=$(),L=_("button"),L.textContent="Image Refresh",Y=$(),y&&y.c(),Q(t,"width","90vmin"),o(t,"class","svelte-1br85ro"),te(()=>e[11].call(t)),o(l,"width",e[3]),o(l,"height",e[3]),Q(l,"margin","5vmin"),o(l,"class","svelte-1br85ro"),o(u,"width","1024"),o(u,"height","1024"),Q(u,"display","none"),o(u,"class","svelte-1br85ro"),o(d,"width","1024"),o(d,"height","1024"),Q(d,"display","none"),o(d,"class","svelte-1br85ro"),o(h,"type","range"),o(h,"id","hair"),o(h,"name","hair"),o(h,"min","0"),o(h,"max","1530"),o(h,"class","svelte-1br85ro"),o(C,"for","hair"),o(C,"class","svelte-1br85ro"),o(N,"class","svelte-1br85ro"),o(w,"type","range"),o(w,"id","eyes"),o(w,"name","eyes"),o(w,"min","0"),o(w,"max","1530"),o(w,"class","svelte-1br85ro"),o(S,"for","eyes"),o(S,"class","svelte-1br85ro"),o(A,"class","svelte-1br85ro"),o(L,"class","svelte-1br85ro"),o(f,"class","conturl svelte-1br85ro"),o(r,"class","display svelte-1br85ro")},m(b,k){T(b,t,k),n=Ce(t,e[11].bind(t)),T(b,s,k),T(b,r,k),p(r,l),e[12](l),p(r,c),p(r,u),e[13](u),p(r,m),p(r,d),e[14](d),p(r,O),p(r,f),p(f,h),J(h,e[4]),p(f,R),p(f,C),p(f,W),p(f,N),p(f,K),p(f,w),J(w,e[5]),p(f,z),p(f,S),p(f,D),p(f,A),p(f,H),p(f,L),p(f,Y),y&&y.m(f,null),P||(G=[E(We,"resize",e[9]),E(h,"change",e[15]),E(h,"input",e[15]),E(h,"change",e[10]),E(w,"change",e[16]),E(w,"input",e[16]),E(w,"change",e[10]),E(L,"click",e[10])],P=!0)},p(b,[k]){k&8&&o(l,"width",b[3]),k&8&&o(l,"height",b[3]),k&16&&J(h,b[4]),k&32&&J(w,b[5]),b[7]?y?y.p(b,k):(y=oe(b),y.c(),y.m(f,null)):y&&(y.d(1),y=null)},i:F,o:F,d(b){b&&I(t),n(),b&&I(s),b&&I(r),e[12](null),e[13](null),e[14](null),y&&y.d(),P=!1,q(G)}}}function ze(e){return new Promise(t=>setTimeout(t,e))}function De(e,t,n){const s=location.href;let r,l,c,u,m=0,d=0,O,f,h,R=!1;ke(async()=>{await C(),await W()});const C=async()=>{n(3,u=window.innerHeight<window.innerWidth?window.innerHeight*.5:window.innerWidth*.9)},W=async()=>{O=H(d),f=H(m);let a=l.getContext("2d");a.clearRect(0,0,u,u),await K(a,u)},N=async()=>{let a=r.getContext("2d");a.clearRect(0,0,u,u),await w(a,1024,"#000000"),await z(a,1024,f),await S(a,1024,O),await A(a,"./src/lib/base.png",1024),await ze(1e3),n(6,h=r.toDataURL("image/png").replace("image/png","application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=image.png")),n(7,R=!0)},K=async(a,g)=>{n(7,R=!1),await z(a,g,f),await S(a,g,O),await A(a,"./src/lib/base.png",g),await N()},w=async(a,g,i)=>{a.fillStyle=i,a.fillRect(0,0,g,g)},z=async(a,g,i)=>{let v=c.getContext("2d"),M=new Image;M.src="./src/lib/hair.png",M.onload=async()=>{v.drawImage(M,0,0,1024,1024),v.globalCompositeOperation="source-in",v.fillStyle=`rgba(${i[0]!=0?i[0]-40:0},${i[1]!=0?i[1]-40:0},${i[2]!=0?i[2]-40:0})`,v.fillRect(0,0,1024,1024),await A(a,c.toDataURL("image/png"),g)}},S=async(a,g,i)=>{let v=[{image:"./src/lib/base.png",color:"rgba(0,0,0,0)"},{image:"./src/lib/eye_t.png",color:`rgba(${i[0]!=0?.35294117647058826*i[0]:0},${i[1]!=0?.35294117647058826*i[1]:0},${i[2]!=0?.35294117647058826*i[2]:0})`},{image:"./src/lib/eye_b.png",color:`rgba(${i[0]!=0?i[0]-40:0},${i[1]!=0?i[1]-40:0},${i[2]!=0?i[2]-40:0})`},{image:"./src/lib/eye_vd.png",color:`rgba(${i[0]!=0?.35294117647058826*i[0]:0},${i[1]!=0?.35294117647058826*i[1]:0},${i[2]!=0?.35294117647058826*i[2]:0})`},{image:"./src/lib/eye_d.png",color:`rgba(${i[0]!=0?i[0]-40:0},${i[1]!=0?i[1]-40:0},${i[2]!=0?i[2]-40:0})`},{image:"./src/lib/eye_l.png",color:`rgba(${i[0]!=255?Math.floor(.4785714285714286*i[0]+130):255},${i[1]!=255?Math.floor(.4785714285714286*i[1]+130):255},${i[2]!=255?Math.floor(.4785714285714286*i[2]+130):255})`},{image:"./src/lib/eye_h.png",color:`rgba(${i[0]!=255?Math.floor(.15*i[0]+219):255},${i[1]!=255?Math.floor(.15*i[1]+219):255},${i[2]!=255?Math.floor(.15*i[2]+219):255})`},{image:"./src/lib/eye_lh.png",color:`rgba(${i[0]!=255?Math.floor(.25*i[0]+196):255},${i[1]!=255?Math.floor(.25*i[1]+196):255},${i[2]!=255?Math.floor(.25*i[2]+196):255})`}];D(a,v,g,0)},D=async(a,g,i,v)=>{if(v!=8){let M=c.getContext("2d");M.globalCompositeOperation="source-over",M.clearRect(0,0,1024,1024);let ne=new Image;ne.src=g[v].image,ne.onload=async()=>{M.drawImage(ne,0,0,1024,1024),M.globalCompositeOperation="source-in",M.fillStyle=g[v].color,M.fillRect(0,0,1024,1024),await A(a,c.toDataURL("image/png"),i),D(a,g,i,v+1)}}},A=async(a,g,i)=>{a.globalCompositeOperation="source-over";let v=new Image;v.src=g,v.onload=async()=>{a.drawImage(v,0,0,i,i)}},H=a=>{let g=[[255,0,0,2],[255,0,255,0],[0,0,255,1],[0,255,255,2],[0,255,0,0],[255,255,0,1],[255,0,0,2]][Math.floor(a/255)];return g[g[3]]+=g[g[3]]?-(a%255):a%255,g.slice(0,3)};function L(){u=this.clientWidth,n(3,u)}function Y(a){U[a?"unshift":"push"](()=>{l=a,n(1,l)})}function P(a){U[a?"unshift":"push"](()=>{r=a,n(0,r)})}function G(a){U[a?"unshift":"push"](()=>{c=a,n(2,c)})}function y(){m=le(this.value),n(4,m)}function b(){d=le(this.value),n(5,d)}return[r,l,c,u,m,d,h,R,s,C,W,L,Y,P,G,y,b,()=>{setTimeout(()=>location.href=s,1e3)}]}class He extends be{constructor(t){super(),he(this,t,De,Ne,fe,{})}}function Pe(e){let t,n,s,r,l,c;return t=new He({}),{c(){Le(t.$$.fragment),n=$(),s=_("div"),r=$(),l=_("style"),l.textContent=`*{
        margin: 0;
        padding: 0;
    }`},m(u,m){ge(t,u,m),T(u,n,m),T(u,s,m),T(u,r,m),p(document.head,l),c=!0},p:F,i(u){c||(pe(t.$$.fragment,u),c=!0)},o(u){Se(t.$$.fragment,u),c=!1},d(u){me(t,u),u&&I(n),u&&I(s),u&&I(r),I(l)}}}class je extends be{constructor(t){super(),he(this,t,null,Pe,fe,{})}}new je({target:document.getElementById("app")});
